<!DOCTYPE html>
<html>
	<head>
		<title>?</title>
		<!--[if IE]><script src="excanvas.js"></script><![endif]-->
		<script src="oo.js"></script>
		<script src="canvas.js"></script>
		<style type="text/css">

#c {
	border: 1px solid black;
}
		</style>
	</head>

	<body>
		<canvas id="c" width="500" height="500"></canvas>
<script type="text/javascript">

	var c = document.getElementById("c");
	var ctx = c.getContext("2d");

	var surface = new CanvasObject("c");
	
	var r0 = new Rectangle(30,20, 50, 50, {bgColor: '#aaaaaa', 
		mouseEnter: function() {console.log("mouse entering the black rectangle");},
		mouseLeave: function() {console.log("mouse leaving the black rectangle");},
	});
	var r1 = new Rectangle(10,10, 40, 40, {bgColor: '#ffaaaa',
		mouseEnter: function() {console.log("mouse entering the red rectangle");},
		mouseLeave: function() {console.log("mouse leaving the red rectangle");},
	});
	var r2 = new Rectangle(10,10, 30, 30, {bgColor: '#aaffaa',
		mouseEnter: function() {console.log("mouse entering the green rectangle");},
		mouseLeave: function() {console.log("mouse leaving the green rectangle");},
	});
	var r3 = new Rectangle(10,10, 20, 20, {bgColor: '#aaaaff',
		mouseEnter: function() {console.log("mouse entering the blue rectangle");},
		mouseLeave: function() {console.log("mouse leaving the blue rectangle");},
	});
	var r4 = new Rectangle(10,10, 10, 10, {bgColor: '#ffffaa',
		mouseEnter: function() {console.log("mouse entering the yellow rectangle");},
		mouseLeave: function() {console.log("mouse leaving the yellow rectangle");},
	});

	r0.appendChild(r1);
	r1.appendChild(r2);
	r2.appendChild(r3);
	r3.appendChild(r4);
	surface.add(r0);

	var map = new Rectangle(100,100, 200, 200, {bgColor: "#fff4f4"});
	var c0 = new Cell(0, 0, 40, 20, {

		bgColor: '#aaffaa',
		lineWidth: 0.7,
		strokeStyle: '#448844',

		mouseEnter: function() {
			console.log("mouse entering cell");
			this.bgColor = "#ffaaaa";
			this.strokeStyle = "#884444";
			this.invalidate();
			},

		mouseLeave: function() {
			console.log("mouse leaving cell");
			this.bgColor = "#aaffaa";
			this.strokeStyle = "#448844";
			this.invalidate();
		},
	});
	map.appendChild(c0);

	surface.add(map);

/*
	surface.add(new Rectangle(10, 10, 5, 130, {

		bgColor: "#cc0000",
		
		onclick: function() { alert("CLICK 0"); },
		
		mouseEnter: function() {
			this.bgColor = "#00cc00";
			this.invalidate();
		},

		mouseLeave: function() {
			this.bgColor = "#cc0000";
			this.invalidate();
		}}));

	surface.add(new Rectangle(50, 50, 20, 20, {
		onclick: function() { alert("CLICK 2"); }}));

	surface.add(new Rectangle(5,5,3));

	var cellOptions = {

		fillStyle: "#00cc00",
		selected: false,

		mouseEnter: function() {
			if(this.selected) {
				this.fillStyle = "#ff0000";
			} else {
				this.fillStyle = "#cc0000";
			}
			this.invalidate();
		},

		mouseLeave: function() {
			if(this.selected) {
				this.fillStyle = "#00ff00";
			} else {
				this.fillStyle = "#00cc00";
			}
			this.invalidate();
		},

		onclick: function(x,y) {
			this.selected = !this.selected;
			this.mouseEnter();
		}
	};

	surface.add(new Cell(120,20,40,20, cellOptions));
	surface.add(new Cell(140,30,40,20, cellOptions));

	surface.add(new Cell(100,30,40,20, cellOptions));
	surface.add(new Cell(120,40,40,20, cellOptions));

	surface.add(new Map(250, 100, 12, 12, {
		cellOptions: cellOptions,
		cellW: 40,
		cellH: 20,
	}));
*/
	surface.draw();

</script>
</body>
</html>
